jQuery(document).ready(function(f){var E=f("#wc_home_url").val();var u=f("#wc_plugin_dir_url").val();var w;var l;var k;var s;var D;var j;var g;var z;var h;var n;var A;var d;var p=parseInt(f("#wc_comment_list_update_type").val());var e=parseInt(f("#wc_comment_list_update_timer").val());var i;var I;var m=f(".wc_website").attr("placeholder");f(".wc_comment").autoGrow();f(document).delegate("#wc_openModalFormAction","click",function(){f("#wc_openModalFormAction").css("opacity","0");f("#wc_openModalFormAction").css("pointer-events","none")});f(document).delegate("#wc_openModalFormAction .close","click",function(){f("#wc_openModalFormAction").css("opacity","0");f("#wc_openModalFormAction").css("pointer-events","none")});d="<img width='64' height='64' src='"+E+"/"+u+"/files/img/loader/ajax-loader-200x200.gif' />";n=f("#wc_comments_offset");n.val("1");f(document).delegate(".wc_comment","focus",function(){var J=a(f(this));f("#wc-form-footer-"+J).slideDown(700)});f(document).delegate(".wc-reply-link","click",function(){var J=a(f(this));if(f(".wc_social_plugin_wrapper .wp-social-login-provider-list").length&&!(f("#wc-secondary-forms-social-content-"+J+" .wp-social-login-provider-list").length)){f(".wc_social_plugin_wrapper .wp-social-login-provider-list").clone().prependTo("#wc-secondary-forms-social-content-"+J)}else{if(f(".wc_social_plugin_wrapper .the_champ_login_container").length&&!(f("#wc-secondary-forms-social-content-"+J+" .the_champ_login_container").length)){f(".wc_social_plugin_wrapper .the_champ_login_container").clone().prependTo("#wc-secondary-forms-social-content-"+J)}else{if(f(".wc_social_plugin_wrapper .social_connect_form").length&&!(f("#wc-secondary-forms-social-content-"+J+" .social_connect_form").length)){f(".wc_social_plugin_wrapper .social_connect_form").clone().prependTo("#wc-secondary-forms-social-content-"+J)}else{if(f(".wc_social_plugin_wrapper .oneall_social_login_providers").length&&!(f("#wc-secondary-forms-social-content-"+J+" .oneall_social_login_providers").length)){f(".wc_social_plugin_wrapper .oneall_social_login .oneall_social_login_providers").clone().prependTo("#wc-secondary-forms-social-content-"+J)}}}}f("#wc-secondary-forms-wrapper-"+J).slideToggle(700)});f(document).delegate(".wc-share-link","click",function(){var J=a(f(this));f("#share_buttons_box-"+J).slideToggle(1000)});f(document).delegate(".wc_captcha_refresh_img","click",function(){var L=a(f(this));var J=f("#wc_comment_post_ID-"+L).val();var K=f("#wc_comment_parent-"+L).val();f("#wc_captcha_img-"+L).attr("src",E+"/"+u+"/captcha/captcha.php?comm_id="+J+"-"+K+"&r="+Math.random())});f(document).delegate(".wc_comm_submit","click",function(){h=f(this).attr("id");var M=h.substring(h.lastIndexOf("-")+1);w=f("#wc_name-"+M).val();l=f("#wc_email-"+M).val();s=(f("#wc_website-"+M).length)?f("#wc_website-"+M).val():"";if(m==s){s=""}k=f("textarea#wc_comment-"+M).val();D=f("#wc_captcha-"+M).val();j=f("#wc_comment_post_ID-"+M).val();g=f("#wc_comment_parent-"+M).val();z=f("#wc_comm_form-"+M);var N=f("input[name='wc_comment_reply_notification-"+M+"']:checked").length?f("input[name='wc_comment_reply_notification-"+M+"']:checked").val():"";var L="";if(c(h,j)){L=1}else{L=y(f(this).parents(".wc-comment"))}var J="";if(N.length&&N!="wc_notification_none"){if(N=="wc_notification_new_reply"){J="comment"}if(N=="wc_notification_all_new_reply"){J="all_comment"}if(N=="wc_notification_new_comment"){J="post"}}var K=true;if(!wpdiscuzValidator.checkAll(z)){K=false;f("#wc_captcha-"+M).val("");f("#wc_captcha_img-"+M).attr("src",E+"/"+u+"/captcha/captcha.php?comm_id="+j+"-"+g+"&r="+Math.random())}else{f("#wc_openModalFormAction .close").css("display","none");f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction > #wc_response_info").html(d)}if(K){f.ajax({type:"POST",url:wc_ajax_obj.url,data:{name:w,email:l,website:s,comment:k,captcha:D,comment_post_ID:j,comment_parent:g,comment_depth:L,notification_type:J,action:"wc_comms_via_ajax"}}).done(function(O){f("#wc_captcha_img-"+M).attr("src",E+"/"+u+"/captcha/captcha.php?comm_id="+j+"-"+g+"&r="+Math.random());try{var R=f.parseJSON(O);A=parseInt(R.wc_new_comment_id);if(R.code===-1){var P="<a href='#close' title='Close' class='close'>&nbsp;</a>";f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction .close").css("display","block");f("#wc_openModalFormAction > #wc_response_info").html(P+R.message)}else{if(R.code===-2){var P="<a href='#close' title='Close' class='close'>&nbsp;</a>";f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction .close").css("display","block");f("#wc_openModalFormAction > #wc_response_info").html(P+R.message);f("#wc_comment-"+M).val("");f(".wc_comm_form textarea").css("height","46px");if(h==="wc_comm-"+j+"_0"){f("#wc-form-footer-"+M).slideToggle(700)}else{f("#wc-secondary-forms-wrapper-"+M).slideToggle(700)}f.cookie("wc_author_name",w);f.cookie("wc_author_email",l);f.cookie("wc_author_website",s)}else{i=R.wc_all_comments_count_new;f("#wc_comment-"+M).val("");f(".wc_comm_form textarea").css("height","46px");if(h==="wc_comm-"+j+"_0"){f(".wc-thread-wrapper").prepend(R.message);f("#wc-form-footer-"+M).slideToggle(700);f("#wc_curr_user_comment_count").val(parseInt(f("#wc_curr_user_comment_count").val())+1)}else{f("#wc-secondary-forms-wrapper-"+M).slideToggle(700);if(R.is_in_same_container==1){f("#wc-secondary-forms-wrapper-"+M).after(R.message)}else{f("#wc-secondary-forms-wrapper-"+M).after(R.message.replace("wc-reply","wc-reply wc-no-left-margin"))}}f("#wc_openModalFormAction").css("opacity","0");f("#wc_openModalFormAction").css("pointer-events","none");f.cookie("wc_author_name",w);f.cookie("wc_author_email",l);f.cookie("wc_author_website",s);f("#wpcomm .wc_name").val(w);f("#wpcomm .wc_email").val(l);f("#wpcomm .wc_website").val(s);if(f(".wc_header_text_count").length){f(".wc_header_text_count").val(parseInt(f(".wc_header_text_count").val())+1)}f.cookie("wc_all_comments_count_new",i)}}f("#wc_captcha-"+M).val("");f(".wc_tooltipster").tooltipster({offsetY:2});f(".wc_comm_form input").css("box-shadow","0 0 4px -2px #d4d0ba");f(".wc_comm_form textarea").css("box-shadow","0 0 4px -2px #d4d0ba");b(j,A,l,J);if(R.code==1||R.code==-2){f.ajax({type:"POST",url:wc_ajax_obj.url,data:{wc_new_comment_id:A,action:"wpdiscuz_comment_redirect"}}).done(function(T){try{var S=f.parseJSON(T);if(S.code==1){setTimeout(function(){window.location.href=S.redirect_to},5000)}}catch(U){}})}}catch(Q){f("#wc_captcha-"+M).val("");f(".wc_tooltipster").tooltipster({offsetY:2});f(".wc_comm_form input").css("box-shadow","0 0 4px -2px #d4d0ba");f(".wc_comm_form textarea").css("box-shadow","0 0 4px -2px #d4d0ba");var P="<a href='#close' title='Close' class='close'>&nbsp;</a>";f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction .close").css("display","block");if(O.indexOf("<")>=0&&O.indexOf(">")>=0){f("#wc_openModalFormAction > #wc_response_info").html(P+Q)}else{f("#wc_openModalFormAction > #wc_response_info").html(P+O)}}})}else{return false}});f(document).delegate(".wc_vote","click",function(){var L=a(f(this));var J=G(L);var K;f("#wc_openModalFormAction > #wc_response_info").html(d);f("#wc_openModalFormAction .close").css("display","block");f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");if(f(this).hasClass("wc-up")){K=1}else{K=-1}f.ajax({dateType:"json",type:"POST",url:wc_ajax_obj.url,data:{comment_ID:J,vote_type:K,action:"wc_vote_via_ajax"}}).done(function(M){var O=f.parseJSON(M);if(O.code!==-1){f("#vote-count-"+L).text(parseInt(f("#vote-count-"+L).text())+K);f("#wc_openModalFormAction").css("opacity","0");f("#wc_openModalFormAction").css("pointer-events","none")}else{var N="<a href='#close' title='Close' class='close'>&nbsp;</a>";f("#wc_response_info").html(N+O.message);f("#wc_openModalFormAction .close").css("display","block")}})});f(document).delegate(".wc-load-more-submit","click",function(){f("#wc_openModalFormAction > #wc_response_info").html(d);f("#wc_openModalFormAction .close").css("display","none");f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");var M=n.val();var N=F(f(this).attr("id"));var O=parseInt(f("#wc_parent_comments_count").val());var K=parseInt(f("#wc_parent_per_page").val());var L=(f("#wc_last_comment_id_before_update").val())?f("#wc_last_comment_id_before_update").val():0;var J=f("#wc_curr_user_comment_count").val();M=parseInt(M);M++;f.ajax({type:"POST",url:wc_ajax_obj.url,data:{comments_offset:M,wc_curr_user_comment_count:J,wc_post_id:N,wc_last_comment_id:L,action:"wc_load_more_comments"}}).done(function(P){var Q=f.parseJSON(P);n.val(M);if(O<=(M*K)){f(".wc-load-more-submit-wrap").remove()}f(".wc-thread-wrapper").html(Q.message);f("#wc_last_comment_id").val(Q.wc_last_comment_id);f("#hidden_new_comment_count").val(Q.hidden_new_comment_count);f("#wc_openModalFormAction").css("opacity","0");f("#wc_openModalFormAction").css("pointer-events","none");f(".wc_tooltipster").tooltipster({offsetY:2});t()})});f(document).delegate(".wc_new_comment","click",function(){h=f(".wc_main_comm_form input.wc_comm_submit").attr("id");var N=h.substring(h.lastIndexOf("-")+1);j=F(N);var L=f("#wc_last_new_comment_id").val();l=f.cookie("wc_author_email");var K=f("#wc_curr_user_comment_count").val();var M=n.val();var J="";f(".wc-thread-wrapper .wc-comment").each(function(){var O=f(this).attr("id");var P=O.substring(O.lastIndexOf("-")+1);J+=G(P)+","});f.ajax({type:"POST",url:wc_ajax_obj.url,data:{wc_requested_comments_type:1,wc_last_comment_id:L,wc_post_id:j,wc_author_email:l,wc_comments_offset:M,wc_curr_user_comment_count:K,wc_visible_comments_ids:J,action:"wc_list_new_comments"}}).done(function(O){try{var Q=f.parseJSON(O);if(Q.code!=0){f(".wc-thread-wrapper").html(Q.message);f("#wc_last_new_comment_id").val(Q.wc_last_comment_id);f(".wc_new_comment").hide();f(document).delegate(".wc_new_loaded_comment","mouseenter",function(){if(f(this).parent(".wc-comment").hasClass("wc-reply")){f(this,".wc-comment-right").animate({backgroundColor:"#f8f8f8"},1500)}else{f(this,".wc-comment-right").animate({backgroundColor:"#fefefe"},1500)}f(this,".wc-comment-right").removeClass("wc_new_loaded_comment")})}}catch(P){console.log(P)}})});f(document).delegate(".wc_new_reply","click",function(){h=f(".wc_main_comm_form input.wc_comm_submit").attr("id");var N=h.substring(h.lastIndexOf("-")+1);j=F(N);var L=f("#wc_last_new_reply_id").val();l=f.cookie("wc_author_email");var K=f("#wc_curr_user_comment_count").val();var M=n.val();var J="";f(".wc-thread-wrapper .wc-comment").each(function(){var O=f(this).attr("id");var P=O.substring(O.lastIndexOf("-")+1);J+=G(P)+","});f.ajax({type:"POST",url:wc_ajax_obj.url,data:{wc_requested_comments_type:2,wc_last_comment_id:L,wc_comments_offset:M,wc_curr_user_comment_count:K,wc_post_id:j,wc_author_email:l,wc_visible_comments_ids:J,action:"wc_list_new_comments"}}).done(function(O){try{var Q=f.parseJSON(O);if(Q.code!=0){f(".wc-thread-wrapper").html(Q.message);f("#wc_last_new_reply_id").val(Q.wc_last_comment_id);f(".wc_new_reply").hide()}}catch(P){console.log(P)}})});function a(K){var J=K.attr("id");var L=J.substring(J.lastIndexOf("-")+1);return L}function F(K){var J=K.substring(K.lastIndexOf("-")+1);J=J.substring(0,J.lastIndexOf("_"));return J}function G(K){var J=K.substring(K.indexOf("_")+1);return J}function y(L){var K=L.attr("class");var J=K.split(" ");var M="";f.each(J,function(N,O){if("wc_comment_level"===H(O,false)){M=H(O,true)}});return parseInt(M)+1}function H(J,K){var L="";if(K){L=J.substring(J.indexOf("-")+1)}else{L=J.substring(0,J.indexOf("-"))}return L}function c(K,J){return K==="wc_comm-"+J+"_0"}function r(){var J=f.cookie("wc_all_comments_count_new")?false:true;if(p==1){if(!v(J)){q()}}else{if(p==2){if(!v(J)){C()}}}}function q(){j=f("#wpdiscuz_current_post_id").val();var P=f("#wc_last_comment_id_before_update").val();var L=f("#wc_last_new_comment_id").val();var M=f("#wc_last_new_reply_id").val();var N=f("#wc_comments_offset").length?f("#wc_comments_offset").val():1;var O=f.cookie("wc_all_comments_count_old");var J=f("#wc_curr_user_comment_count").val();var K=f.cookie("wc_author_email");f.ajax({type:"POST",url:wc_ajax_obj.url,data:{wc_author_email:K,wc_curr_user_comment_count:J,wc_last_comment_id:P,wc_last_new_comment_id:L,wc_last_new_reply_id:M,wc_all_comments_count_old:O,wc_comments_offset:N,wc_comment_list_update_type:p,wc_post_id:j,action:"wc_live_update"}}).done(function(Q){o(Q)})}function C(){h=f(".wc_main_comm_form input.wc_comm_submit").attr("id");var O=h.substring(h.lastIndexOf("-")+1);j=F(O);g=G(O);var M=f("#wc_comments_offset").length?f("#wc_comments_offset").val():1;var J=f("#wc_curr_user_comment_count").val();var N=f("#wc_last_comment_id").val();var K=f("#wc_last_new_comment_id").val();var L=f("#wc_last_new_reply_id").val();l=f.cookie("wc_author_email");f.ajax({type:"POST",url:wc_ajax_obj.url,data:{wc_last_comment_id:N,wc_last_new_comment_id:K,wc_last_new_reply_id:L,wc_comment_list_update_type:p,wc_comments_offset:M,wc_curr_user_comment_count:J,wc_post_id:j,wc_author_email:l,action:"wc_live_update"}}).done(function(P){o(P)})}function o(J){try{var L=f.parseJSON(J);if(L.code==1){f(".wc-thread-wrapper").html(L.message);if(f(".wc_header_text_count").length){f(".wc_header_text_count").html(L.wc_all_comments_count_new)}f("#wc_last_comment_id").val(L.wc_last_comment_id)}else{if(L.code==2){if(L.wc_new_comment_count){f(".wc_new_comment_button_text").html(L.wc_new_comment_count+" "+L.wc_new_comment_button_text);f(".wc_new_comment").css("display","inline-block")}else{f(".wc_new_comment").css("display","none")}if(L.wc_new_reply_count){f(".wc_new_reply_button_text").html(L.wc_new_reply_count+" "+L.wc_new_reply_button_text);f(".wc_new_reply").css("display","inline-block")}else{f(".wc_new_reply").css("display","none")}}}t()}catch(K){console.log(K)}}function v(L){var K=f(".wc_secondary_form input.wc_field_input").is(":focus");var J=f(".wc_secondary_form textarea.wc_field_input").is(":focus");var N=false;var M=false;if(L){f(".wc_secondary_form input.wc_field_input").each(function(){if(f(this).val()!=""){N=true}})}else{f(".wc_secondary_form input.wc_field_captcha").each(function(){if(f(this).val()!=""){N=true}})}f(".wc_secondary_form textarea.wc_field_input").each(function(){if(f(this).val()!=""){M=true}});return K||J||N||M}if(p!=0){setInterval(r,e*1000)}function t(){if(f.cookie("wc_author_name")&&f.cookie("wc_author_email")){f(".wc_name").val(f.cookie("wc_author_name"));f(".wc_email").val(f.cookie("wc_author_email"))}}function b(K,M,J,L){f.ajax({type:"POST",url:wc_ajax_obj.url,data:{wc_post_id:K,wc_comment_id:M,wc_notifcattion_type:L,wc_email:J,action:"wc_check_notification_type"}})}f(document).delegate(".wc_editable_comment","click",function(){var K=a(f(this));var J=G(K);f.ajax({type:"POST",url:wc_ajax_obj.url,data:{comment_id:J,action:"wc_get_editable_comment_content"}}).done(function(M){try{var P=f.parseJSON(M);if(P.code==1){I=P.message;var L='<textarea required="required" name="wc_comment" class="wc_comment wc_field_input wc_edit_comment" id="wc_edit_comment-'+K+'" style="min-height: 2em;">'+P.message+"</textarea>";f("#wc-comm-"+K+" > .wc-comment-right .wc-comment-text").replaceWith(L);document.getElementById("wc_edit_comment-"+K).focus();f("#wc_save_edited_comment-"+K).show();L="";f("#wc_editable_comment-"+K).hide();f("#wc_cancel_edit-"+K).show()}else{var N="<a href='#close' title='Close' class='close'>&nbsp;</a>";f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction .close").css("display","block");f("#wc_openModalFormAction > #wc_response_info").html(N+P.phrase_message)}}catch(O){console.log(O)}})});f(document).delegate(".wc_save_edited_comment","click",function(){var O=a(f(this));var K=G(O);var J=f("#wc-comm-"+O+" textarea#wc_edit_comment-"+O);var L=J.val();var M=true;var N=y(f(this).parents(".wc-comment"))-1;if(f.trim(L).length<=0){M=false}if(M){f("#wc_openModalFormAction .close").css("display","none");f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction > #wc_response_info").html(d);f.ajax({type:"POST",url:wc_ajax_obj.url,data:{comment_id:K,comment_content:L,comment_depth:N,action:"wc_save_edited_comment"}}).done(function(P){try{var S=f.parseJSON(P);if(S.code==1){f("#wc_openModalFormAction").css("opacity","0");f("#wc_openModalFormAction").css("pointer-events","none");B(O,S.message)}else{var Q="<a href='#close' title='Close' class='close'>&nbsp;</a>";f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction .close").css("display","block");f("#wc_openModalFormAction > #wc_response_info").html(Q+S.phrase_message)}J="";L=""}catch(R){console.log(R)}})}});f(document).delegate(".wc_cancel_edit","click",function(){var J=a(f(this));B(J,I)});function B(L,K){f("#wc_editable_comment-"+L).show();f("#wc_cancel_edit-"+L).hide();f("#wc_save_edited_comment-"+L).hide();var J='<div class="wc-comment-text">'+x(K)+"</div>";f("#wc-comm-"+L+" #wc_edit_comment-"+L).replaceWith(J)}function x(M,L){var K=(L||typeof L==="undefined")?"<br/>":"<br>";var J=(M+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+K+"$2");return J.replace("<br><br>","<br/>")}f(".wc_tooltipster").tooltipster({offsetY:2})});